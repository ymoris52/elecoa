# 更新履歴

## 2024年8月29日
- [共通]
	- PHP 8.1～8.3に対応しました。
	- 軽微な問題を修正しました。
- [Moodleプラグイン]
	- Moodleの要求バージョンを4.1に変更しました。

## 2024年3月10日
- GitHubにリポジトリを作成しました。

## 2023年7月13日
- [ELECOA Player]
	- 同じコンテンツを複数回アップロードしたときの動作を改善しました。

## 2022年11月06日
- [ELECOA Player]
	- ログの閲覧機能を追加しました。

## 2021年9月28日
- [共通]
	- 2020年6月17日の更新により、SCORMコンテンツによってはページ遷移が行えなくなっていた問題を修正しました。

## 2021年9月19日
- [ELECOA Player]
	- PHP 8.0で動作しない問題を修正しました。
- [Moodleプラグイン]
	- Moodle 3.11に対応しました。
	- Moodleの要求バージョンを3.9に変更しました。

## 2021年2月9日
- [共通]
	- コンテンツの成績が正しく記録されないことがある問題を修正しました。

## 2020年12月17日
- [共通]
	- SCORMコンテンツのページ遷移が正常に行われないことがある問題を修正しました。

## 2020年6月17日
- [共通]
	- Google Chrome等、いくつかのWebブラウザで動作しなくなった問題を修正しました。
- [Moodleプラグイン]
	- 軽微な問題を修正しました。

## 2020年2月23日
- [Moodleプラグイン]
	- cmi5コースのマニフェストファイルを手作業で変換する必要をなくしました。
	- Moodleの要求バージョンを3.5に変更しました。

## 2019年11月4日
- [Moodleプラグイン]
	- 外部から見える動作に影響がない範囲で、ソースコードを修正しました。

## 2019年8月12日
- [Moodleプラグイン]
	- cmi5に関する誤りの修正と、動作の改善を行いました。LRSのエンドポイントと認可トークンを設定するファイルを変更しました。

## 2019年5月21日
- [ELECOA Player]
	- コンテンツの二重起動などのエラーが起こった際に、ログアウトできるようにしました。 (これまでは、それ以上の操作が行えませんでした。)
- [Moodleプラグイン]
	- グループ学習などで使用する教材オブジェクトの動作の誤りを修正しました。

## 2019年3月16日
- [Moodleプラグイン]
	- cmi5に関する誤りの修正と、動作の改善を行いました。

## 2019年1月8日
- [共通]
	- SCORM 1.2のデータモデルの誤りを修正しました。

## 2018年12月27日
- [Moodleプラグイン]
	- Moodle 3.6に対応しました。
	- 軽微な問題を修正しました。

## 2018年10月21日
- [Moodleプラグイン]
	- cmi5コースのAUが発行するステートメントが正しく記録されないことがある問題を修正しました。

## 2018年9月2日
- [共通]
	- コンテンツの表示画面の制御に利用するJavaScriptのライブラリを、YUIからjQueryに変更しました。
	- いくつかの軽微な問題を修正しました。
- [ELECOA Player]
	- PC単体動作版の配布を終了しました。
	- Experience APIを用いた通信機能を廃止しました。
	- 内部で利用しているAPIを変更しました。
	- インタフェースに日本語と英語が混在していたため、英語に統一しました。

## 2018年8月9日
- [Moodleプラグイン]
	- cmi5コースで、別ドメイン(クロスオリジン)のAUが正しく動作しない問題を修正しました。

## 2018年6月11日
- [Moodleプラグイン]
	- 2018年4月28日版(mod_elecoa 2018042800)に混入したデータベース定義の誤りにより、学習が正常に行えない問題を修正しました。2018年4月28日版を新規インストールした場合は、アップデート(上書きインストール)ではなく、アンインストールした後、本バージョンをインストールしてください。2018年4月22日版以前のバージョンからアップデートしていた場合は問題ありません。

## 2018年4月28日
- [Moodleプラグイン]
	- SCORMコンテンツの学習時間に関する誤りを修正しました。

## 2018年4月22日
- [Moodleプラグイン]
	- MySQL以外のデータベース管理システムを使っている場合、教材のページを移動するときにエラーが発生することがある問題を修正しました。

## 2018年4月16日
- [Moodleプラグイン]
	- cmi5に対応しました。

## 2018年4月15日
- [Moodleプラグイン]
	- Moodle 3.4と3.5(development release)で動作確認を行いました。
	- 一時的に廃止していた評定表への対応を再開しました。

## 2017年4月18日
- [Moodleプラグイン]
	- SCORM 2004のSequencing Control Choiceが正しく解釈されない問題を修正しました。

## 2017年4月16日
- [Moodleプラグイン]
	- Moodle 3.1と3.2に対応しました。
	- Moodleの要求バージョンを3.1に変更しました。
	- 一時的に、評定表への対応を廃止しました。次回以降のリリースで再実装する予定です。
	- Microsoft Edgeに対応しました。
	- 内部で利用しているAPIを変更しました。

## 2015年9月10日
- [Moodleプラグイン]
	- サイト管理やコース管理の「評価尺度」で発生していたエラーを修正しました。
	- コース作成者(coursecreator)のケイパビリティ`block/elecoa_grades:studentsview`と`block/elecoa_grades:teachersview`を不許可に変更しました。以前のバージョンからアップデート(上書きインストール)する場合、許可のケイパビリティは引き継がれます。不許可に変更したい場合は、手作業でロールを編集するか、block_elecoa_gradesを一度アンインストールしてから再インストールしてください。

## 2015年6月23日
- [共通]
	- コンテンツの再開時に、中断時の学習データが復元できない問題を修正しました。 (2015年6月10日の更新で混入した問題です。)

## 2015年6月10日
- [共通]
	- 内部で利用しているAPIを変更しました。具体的には、教材オブジェクトが学習データを読み書きするときの、APIの呼び出し方を変更しています。
- [Moodleプラグイン]
	- 英語のリソースを修正しました。
	- モバイル端末への対応状況を改善しました。

## 2015年5月5日
- [共通]
	- ルートアクティビティの直下にリーフアクティビティが配置されたSCORMコンテンツの成績が、正しく記録されない問題を修正しました。
	- SCORM 2004の`<hideLMSUI>`要素が正しく解釈されない問題を修正しました。
	- コンテンツの終了時に、自動的にコンテンツ選択ページ(ELECOA Player)、またはコースページ(Moodleプラグイン)に戻るようにしました。
	- 軽微な問題の修正、動作や表示の改善を多数行いました。
- [ELECOA Player]
	- `init_www.php`で定義している`base_path`の値の書き換えを不要にしました。
- [Moodleプラグイン]
	- イベントと標準ログ(logstore_standard)に対応しました。
	- Moodle 2.8に対応しました。
	- Moodleの要求バージョンを2.7に変更しました。`mod/elecoa/version.php`の`$module->requires`を変更すればMoodle 2.6にもインストールできますが、動作確認は行っておりません。
	- コースのインスタンス一覧(`mod/elecoa/index.php`)が動作しなくなっていた問題を修正しました。

## 2014年12月13日
- [共通]
	- 内部で利用しているAPIを変更しました。具体的には、(アーキテクチャとしての)ELECOAにおける教材オブジェクト・プラットフォーム間インタフェースを変更しています。
	- SCORMコンテンツのアセットの状態を、目次に表示するようにしました。
- [ELECOA Player]
	- Experience APIを用いた通信機能が動作しなくなりました。次回以降のリリースで修正する予定です。
- [Moodleプラグイン]
	- SCORMコンテンツのアセットの成績を、成績表で確認できるようにしました。

## 2014年7月20日
- [ELECOA Player]
	- Experience APIを用いたクライアント・サーバ間通信が行えるようになりました。

## 2014年3月27日
- [共通]
	- SCORMコンテンツの学習時間に関する誤りを修正しました。
- [Moodleプラグイン]
	- 環境によっては、教材の終了時にエラーが起こる問題を修正しました。
	- 成績表に関する、以下の問題を修正しました。
		- 得点がないアクティビティの得点が「0」と表示される問題を修正しました。 (何も表示されないのが正しい動作です。)
		- 成績一覧に表示される最終学習時間の表示が誤っていた問題を修正しました。
		- 成績詳細をCSVでダウンロードしたとき、累積学習時間のフィールドが含まれない問題を修正しました。

## 2014年3月24日
- [共通]
	- SCORMコンテンツの学習時間に関する誤りを修正しました。
- [Moodleプラグイン]
	- MySQL以外のデータベース管理システムでは、成績が正常に記録されなくなっていた問題を修正しました。
	- 成績表の成績一覧で、ユーザごとの集約の最終学習終了日時と最終学習時間の表示の誤りを修正しました。
	- 成績表をモバイル端末で表示したときの、以下の問題を修正しました。
		- 閲覧していない(トラッキング情報がない)SCOでも、トラッキング情報を閲覧する画面に遷移できる問題を修正しました。
		- トラッキング情報の画面で、複数のアテンプトがある場合でも1つしか表示されない問題を修正しました。
		- 成績詳細の「最新」が選択できない問題を修正しました。
		- トラッキング情報の画面で、「最良」「最新」を選択するインタフェースが表示される問題を修正しました。

## 2014年3月1日
- [共通]
	- SCORMコンテンツで、SCOの成績が記録されないことがある問題を修正しました。
- [Moodleプラグイン]
	- 成績表をモバイル端末で表示したときのインタフェースを変更しました。

## 2014年2月13日
- [Moodleプラグイン]
	- Moodle 2.6で、「セッション情報にデータベースを使用する(dbsessions)」を有効にすると、コンテンツが起動できない問題を修正しました。
	- 成績表に表示される日時に、ユーザのタイムゾーンが反映されない問題を修正しました。
	- 成績表に表示される得点を、小数点以下4桁に丸めるように変更しました。
	- ユーザをMoodleから削除したとき、Objectives Global to SystemがTrueの共有グローバル学習目標を削除するようにしました。 (ユーザのすべての成績情報が削除されます。)

## 2014年2月1日
- [共通]
	- SCORM 1.2のコンテンツで、データモデル`cmi.interactions.n.type`の値が`numeric`であるときの、`cmi.interactions.n.correct_responses.n.pattern`の扱いの誤りを修正しました。
	- SCORM 2004に関する、以下の問題を修正しました。
		- `cmi.exit`を`suspend`に設定して`Commit()`したとき、正しくロールアップが行われない問題を修正しました。
		- Use Current Attempt Objective InformationまたはUse Current Attempt Progress InformationがTrueのコンテンツを中断、再開したとき、学習済みのSCOが未学習に戻る問題を修正しました。
		- 最終学習時間と累積学習時間が正しく記録されないことがある問題を修正しました。
	- いくつかの軽微な問題を修正しました。
- [Moodleプラグイン]
	- Moodle 2.6に対応しました。
	- 成績表の表示方法を変更しました。成績の集約方法などをより直感的な方法に変更しています。以前のバージョンのプラグインで学習した成績は正常に表示されません。
	- モバイル端末用インタフェースを、テーマCleanに最適化しました。MyMobileやその他のテーマでも動作します。
	- モバイル端末への対応状況を改善しました。
	- ユーザをコースから削除したとき、成績も削除するようにしました。 (Objectives Global to SystemがTrueの共有グローバル学習目標は削除されません。)
	- 動作速度を向上させました。

## 2013年11月26日
- [共通]
	- Internet Explorer 11に対応しました。
	- Internet Explorer 10でエラーが通知される問題を修正しました。
	- ソフトウェア(ELECOA Player・Moodleプラグイン)をアップデートしたとき、Webブラウザのキャッシュが原因で正しく動作しないことがある点を改善しました。
- [Moodleプラグイン]
	- 成績をCSVでダウンロードする際に、ページ遷移しないように改善しました。
	- コースフォーマット(format_elecoa)を削除しました。
	- 次のページへ進むボタンの文言を「次に」から「次へ」に、前のページに戻るボタンの文言を「前に」から「前へ」に変更しました。

## 2013年9月24日
- [共通]
	- データモデル`cmi.interactions.n.student_response`、または`cmi.interactions.n.result`を利用するSCORM 1.2のコンテンツが正常に動作しない問題を修正しました。
	- SCORMのコンテンツの目次において、習得状態が「不明」で完了状態が「完了」である中間アクティビティ、および習得状態が「不明」で完了状態が「未完了」である中間アクティビティを表すアイコンを追加しました。

## 2013年8月24日
- [共通]
	- 中断していないコンテンツも再開できる問題を修正しました。 (ELECOA Playerは、2013年7月31日の更新では不十分だった箇所を修正しました。また、同日の更新により、Moodleプラグインに混入した同様の問題を修正しました。)

## 2013年7月31日
- [共通]
	- 2013年6月18日の更新により、SCORMではないコンテンツが動作しなくなっていた問題を修正しました。
	- SCORMのコンテンツを再開したとき、警告(E_NOTICE)が出る問題を修正しました。
- [ELECOA Player]
	- 中断していないコンテンツも再開できる問題を修正しました。
- [Moodleプラグイン]
	- データベース管理システムの種類によっては、バックアップ・リストアとインポートが正しく行われないことがある問題を修正しました。

## 2013年6月18日
- [共通]
	- SCORMのコンテンツが、BeforeUnloadEventで`Terminate()`(`LMSFinish()`)したとき、正常に動作しないことがある問題を修正しました。 (2012年11月5日版で修正した問題の再発を修正しました。)
	- Firefoxのエラーコンソールにエラーが記録される問題を修正しました。

## 2013年6月7日
- [共通]
	- コンテンツの表示画面の制御に利用しているYUI(Yahoo! User Interface Library)のバージョンを、2から3に変更しました。
	- SCORMではないコンテンツ(SimpleRoot、SimpleBlock、SimpleLeafを用いるコンテンツ)が動作しなくなっていた問題を修正しました。
	- 目次を複数回選択(連打)できないようにしました。
	- PHP 5.4で、警告(E_NOTICE)が出る問題を修正しました。
	- 規模の大きなリファクタリングを行いました。
- [ELECOA Player]
	- YUIをCDNから読み込むようにしました。このため、インターネットに接続されていない環境では動作せず、httpsスキームのサイトでは動作しないことがあります。
	- PHPの設定で、`short_open_tag`がオンの場合、動作しない問題を修正しました。
	- コンテンツがエラーで終了したとき、次の起動時に二重起動のエラーが起こる問題を修正しました。
- [Moodleプラグイン]
	- ケイパビリティ`mod/elecoa:addinstance`、`block/elecoa_grades:addinstance`を追加しました。
	- 成績表のモバイル端末用インタフェースを用意しました。Android・iOS搭載端末でアクセスすると、最適化されたインタフェースとなります。
	- 成績表の画面の制御に利用するJavaScriptライブラリを、jQueryからYUIに変更しました。
	- 動作速度を向上させました。
	- Moodle 2.3以下では動作しなくなりました。

## 2013年4月20日
- [共通]
	- Internet Explorer 10に対応しました。
- [Moodleプラグイン]
	- 動作速度を向上させました。
	- 軽微な問題を修正しました。

## 2013年4月15日
- [共通]
	- SCORM 2004に関する、以下の問題を修正しました。
		- 特定の状況で、ロールアップが正しく行われない問題を修正しました。
		- Limit Condition Attempt Limitが0の場合の動作の誤りを修正しました。
	- アセットを含むSCORMコンテンツが動作しない問題を修正しました。
- [Moodleプラグイン]
	- バックアップ・リストアとインポートに対応しました。
	- 評定表に評点が記録されないことがある問題を修正しました。
	- Moodleのセッションハンドリングに関する設定によっては、コンテンツが動作しない問題を修正しました。
	- いくつかの言語ストリングを追加しました。

## 2013年1月8日
- [Moodleプラグイン]
	- モバイル端末で成績表が表示されない問題を修正しました。ただし、成績表はモバイル端末用のインタフェースにはなりません。
	- Moodle 2.4に応急的に対応しました。

## 2012年11月5日
- [共通]
	- SCORMのコンテンツが、BeforeUnloadEventで`Terminate()`(`LMSFinish()`)したとき、正常に動作しないことがある問題を修正しました。
	- 配布物に含まれていた不要なファイルを削除しました。
- [ELECOA Player]
	- PC単体動作版が、WebMatrixで動作しなくなっていた問題を修正しました。
- [Moodleプラグイン]
	- いくつかの軽微な問題を修正しました。

## 2012年10月13日
- [共通]
	- SCORM 2004の、以下の機能に対応しました。
		- データモデル`cmi.exit`、`cmi.interactions.n.correct_responses.n.pattern`、`cmi.learner_preference.audio_level`、`cmi.learner_preference.delivery_speed`、`cmi.learner_preference.audio_captioning`、`cmi.launch_data`に対応しました。
		- `<adlcp:dataFromLMS>`要素に対応しました。
		- `<imsss:sequencing>`要素の`IDRef`属性に対応しました。これにより、SCORM 2004 3rd Edition Conformance Test SuiteのテストケースT-01aとT-01bが動作するようになりました。
		- `<ruleAction>`要素の`action`属性の属性値`hiddenFromChoice`に対応しました。
		- `<ruleCondition>`要素の`condition`属性の属性値`timeLimitExceeded`と`outsideAvailableTimeRange`に対応しました。
		- コンテンツを`Choice`で起動できるようになりました。これにより、`Flow`シーケンシング制御モードが`False`のコンテンツも動作させることができるようになりました。
	- SCORM 2004のシーケンシングに関する問題修正と追加実装を行いました。これにより、SCORM 2004 3rd Edition Conformance Test SuiteのテストケースOB-03a～OB-03cとOB-14bが動作するようになりました。
	- SCORMに関して、`cmi.core.student_name`(SCORM 1.2)と`cmi.learner_name`(SCORM 2004)の実装を改めました。 (ログイン名 → 「姓,名」)
	- いくつかの軽微な問題を修正しました。
- [ELECOA Player]
	- YUI(Yahoo! User Interface Library)をCDNから読み込まず、配布物に含めるように変更しました。
- [Moodleプラグイン]
	- 不要なMoodleのライブラリの読み込みを抑制することにより、コンテンツの起動時やページ遷移時の応答速度を向上させました。
	- コンテンツの表示画面を、モバイル端末に対応させました。Android・iOS搭載端末でアクセスすると、最適化されたインタフェースとなります。
	- YUI(Yahoo! User Interface Library)をCDNから読み込まず、Moodleが提供するものを使うように変更しました。
	- 成績をCSVでダウンロードする際のファイル名を、ASCII文字に変更しました。CSVファイルの文字コードは、BOM付きのUTF-8に変更しました。
	- 成績表の最終学習日時に、ユーザのタイムゾーンを反映するようにしました。

## 2012年9月24日
- [ELECOA Player]
	- Microsoft Web Platform Installer 4.0に対応しました。 (PC単体動作版)

## 2012年6月12日
- [共通]
	- 不正なマニフェストファイルによる脆弱性を修正しました。
	- SCORM 2004のコンテンツの動作の誤りを修正しました。
- [ELECOA Player]
	- 軽微な問題を修正しました。
- [Moodleプラグイン]
	- SCORM 2004のコンテンツにおいて、SCOがセッション時間(学習時間)を申告しなかったとき、LMS(Moodle)側で計算する機能を実装しました。(SCORM 2004の規格で要求)
	- 「レポート→コース参加者」(Moodle 1.9における「参加レポート」)に対応しました。

## 2012年5月19日
- [Moodleプラグイン]
	- PHP 5.4で動作しない問題を修正しました。

## 2012年5月7日
- [共通]
	- ELECOA Player(PC単体動作版・Webサーバ版)とMoodleプラグインの初期版をリリースしました。
